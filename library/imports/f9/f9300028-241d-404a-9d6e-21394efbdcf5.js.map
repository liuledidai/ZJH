{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "BaseFrame",
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "onLoad",
    "console",
    "log",
    "_threadid",
    "undefined",
    "_socket",
    "_gameFrame",
    "m_tabCacheMsg",
    "update",
    "dt",
    "setCallBack",
    "callback",
    "_callBack",
    "setViewFrame",
    "viewFrame",
    "_viewFrame",
    "setSocketEvent",
    "socketEvent",
    "_socketEvent",
    "getViewFrame",
    "isSocketServer",
    "onSocketError",
    "pData",
    "onCloseSocket",
    "onCreateSocket",
    "szUrl",
    "nPort",
    "_szServerUrl",
    "_nServerPort",
    "self",
    "_SocketFun",
    "onSocketCallBack",
    "ClientSocket",
    "createSocket",
    "name",
    "ConnectSocket",
    "main",
    "getmain",
    "sub",
    "getsub",
    "onConnectCompeleted",
    "onSocketEvent",
    "releaseSocket",
    "sendSocketData",
    "onGameSocketEvent",
    "module",
    "exports"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var BaseFrame = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        // this._viewFrame = view;\n        console.log(\"BaseFrame onLoad\");\n        this._threadid = undefined;\n        this._socket = undefined;\n        // this._callBack = callback;\n        \n        this._gameFrame = undefined;\n        this.m_tabCacheMsg = {};\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n\n    },\n    // name: \"BaseFrame\",\n    // ctor: function(){\n    //     // this._viewFrame = view;\n    //     this._threadid = undefined;\n    //     this._socket = undefined;\n    //     // this._callBack = callback;\n        \n    //     this._gameFrame = undefined;\n    //     this.m_tabCacheMsg = {};\n        \n    // },\n    setCallBack: function(callback){\n      this._callBack = callback;  \n    },\n    setViewFrame: function(viewFrame){\n      this._viewFrame = viewFrame;  \n    },\n    setSocketEvent: function(socketEvent){\n        this._socketEvent = socketEvent;\n    },\n    getViewFrame: function(){\n      return this._viewFrame;  \n    },\n    isSocketServer: function(){\n        return this._socket !== undefined && this._threadid !== undefined;\n    },\n    onSocketError: function(pData){\n      if(this._threadid === undefined)\n      {\n          return\n      }\n      \n      this.onCloseSocket();\n      //todo...\n    },\n    onCreateSocket: function(szUrl,nPort){\n        if(this._socket !== undefined)\n        {\n            return false;\n        }\n        this._szServerUrl = szUrl;\n        this._nServerPort = nPort;\n        var self = this;\n        this._SocketFun = function(pData){\n            self.onSocketCallBack(pData);\n        };\n        this._socket = ClientSocket.createSocket(this._SocketFun);\n        console.log(this.name);\n        if(this._socket.ConnectSocket(this._szServerUrl,this._nServerPort) === true)\n        {\n            this._threadid = 0;\n            return true;\n        }\n        else\n        {\n            console.log(\"onCreateSocket close\");\n            this.onCloseSocket();\n            return false;\n        }\n    },\n    onSocketCallBack: function(pData){\n        if(pData === undefined)\n        {\n            return;\n        }\n        // if(this._callBack === undefined)\n        // {\n        //     console.log('no callback');\n        //     this.onCloseSocket();\n        //     return;\n        // }\n        var main = pData.getmain();\n        var sub = pData.getsub();\n        console.log(\"onSocketCallBack main: \" + main + \" #sub: \"+sub);\n        if(main === 0) \n        {\n            if(sub === 0) \n            {\n                this._threadid = 1;\n                this.onConnectCompeleted();\n            }\n            else\n            {\n                this.onSocketError(pData);\n                this.onCloseSocket();\n            }\n        }\n        else\n        {\n            this.onSocketEvent(main, sub, pData);\n        }\n    },\n    onCloseSocket: function(){\n        if(this._socket !== undefined)\n        {\n            this._socket.releaseSocket();\n            this._socket = undefined;\n        }\n        if(this._threadid !== undefined)\n        {\n            this._threadid = undefined;\n        }\n        this._SocketFun = undefined;\n    },\n    sendSocketData: function(pData){\n        if (this._socket === undefined)\n        {\n            return false;\n        }\n        this._socket.sendSocketData(pData);\n    },\n    onConnectCompeleted: function(){\n        console.log(\"BaseFrame_onConnectCompeleted\");\n    },\n    onSocketEvent: function(main,sub,pData){\n        console.log(\"BaseFrame_onSocketEvent_\"+main+\"-\"+sub);\n    },\n    onGameSocketEvent: function(main,sub,pData){\n        console.log(\"BaseFrame_onGameSocketEvent_\"+main+\"-\"+sub);\n    },\n    \n});\n\nmodule.exports = BaseFrame;"
  ]
}